# This file is auto-generated by openmediavault (https://www.openmediavault.org)
# WARNING: Do not edit this file, your changes will get lost.

# public-hoarder
# bookmark manager
---
services:
  web:
    container_name: hoarder
    image: ghcr.io/hoarder-app/hoarder:release
    entrypoint: ["/load-hoarder-secrets.sh"]
    environment:
      - MEILI_ADDR=http://meilisearch:7700
      - BROWSER_WEB_URL=http://chrome:9222
      - NEXTAUTH_URL=http://localhost:3000 # replace with URL
      - DATA_DIR=/data
    volumes:
      - ./data/hoarder:/data
      - ./load-hoarder-secrets.sh:/load-hoarder-secrets.sh
    ports:
      - 3000:3000
    networks:
      - apollo_bridge
    secrets:
      - nextauth_secret
      - meili_master_key
      - openai_api_key
    labels:
      - diun.enable=true
    restart: unless-stopped
  chrome:
    container_name: hoarder-chrome
    image: gcr.io/zenika-hub/alpine-chrome:123
    command:
      - --no-sandbox
      - --disable-gpu
      - --disable-dev-shm-usage
      - --remote-debugging-address=0.0.0.0
      - --remote-debugging-port=9222
      - --hide-scrollbars
    networks:
      - apollo_bridge
    restart: unless-stopped
  meilisearch:
    container_name: hoarder-meilisearch
    image: getmeili/meilisearch:v1.11.1
    environment:
      - MEILI_NO_ANALYTICS=true
    volumes:
      - ./data/meilisearch:/meili_data
    networks:
      - apollo_bridge
    restart: unless-stopped
networks:
  apollo_bridge:
    external: true
secrets:
  nextauth_secret:
    file: /run/secrets/nextauth_secret
  meili_master_key:
    file: /run/secrets/meili_master_key
  openai_api_key:
    file: /run/secrets/openai_api_key
