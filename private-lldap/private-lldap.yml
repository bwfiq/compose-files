# This file is auto-generated by openmediavault (https://www.openmediavault.org)
# WARNING: Do not edit this file, your changes will get lost.

# private-lldap
# lightweight ldap server
---
services:
  lldap:
    container_name: lldap
    image: lldap/lldap:stable
    environment:
      - UID=${PUID}
      - GID=${PGID}
      - TZ=${TZ}
      # Secret Files
      - LLDAP_JWT_SECRET_FILE=/run/secrets/LLDAP_JWT_SECRET
      - LLDAP_KEY_SEED_FILE=/run/secrets/LLDAP_KEY_SEED
      - LLDAP_LDAP_USER_PASS_FILE=/run/secrets/LLDAP_LDAP_USER_PASS
      # Configuration File Variables
      # - LLDAP_LDAP_BASE_DN=dc=bwfiq,dc=com
      # - LLDAP_HTTP_URL= SET TO PUBLIC URL IF EXPOSED
    volumes:
      - ./data:/data # contains the db
    ports:
      - 17170:17170
    networks:
      - apollo_bridge
    secrets: ['LLDAP_JWT_SECRET', 'LLDAP_KEY_SEED', 'LLDAP_LDAP_USER_PASS']
    labels:
      - diun.enable=true
    restart: always
networks:
  apollo_bridge:
    external: true
secrets:
  LLDAP_JWT_SECRET:
    file: /run/secrets/LLDAP_JWT_SECRET
  LLDAP_KEY_SEED:
    file: /run/secrets/LLDAP_KEY_SEED
  LLDAP_LDAP_USER_PASS:
    file: /run/secrets/LLDAP_LDAP_USER_PASS
